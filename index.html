<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keith Sweat | Official SWEAThearts Portal</title>
    
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,900;1,900&family=Inter:wght@300;400;700;900&display=swap');
        
        :root { --gold: #bf953f; --dark: #050505; }
        body { font-family: 'Inter', sans-serif; background: var(--dark); color: white; scroll-behavior: smooth; margin: 0; padding: 0; }
        
        .gold-text { background: linear-gradient(to right, #bf953f, #fcf6ba, #aa771c); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .gold-btn { background: linear-gradient(45deg, #bf953f, #fcf6ba, #aa771c); color: black; font-weight: 800; transition: 0.3s; cursor: pointer; border: none; }
        .gold-btn:hover { transform: scale(1.02); opacity: 0.9; }
        .glass { background: rgba(255,255,255,0.03); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.08); }
        
        .hero-title { font-family: 'Playfair Display', serif; }
        .hidden-section { display: none !important; }
        
        .vault-container { position: relative; border-radius: 24px; border: 1px solid rgba(191,149,63,0.3); background: #000; overflow: hidden; }

        input, select, textarea { background: rgba(255,255,255,0.05) !important; border: 1px solid rgba(255,255,255,0.1) !important; color: white !important; outline: none; }
        input:focus { border-color: var(--gold) !important; }
        option { background: #111; color: white; }
        
        @keyframes fade-up { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade { animation: fade-up 1s ease forwards; }
        
        .itinerary-card:hover { border-color: rgba(191,149,63,0.5); background: rgba(191,149,63,0.03); }

        #verify-code-input { -webkit-text-fill-color: #bf953f !important; color: #bf953f !important; }
    </style>
</head>
<body>

    <!-- FIXED AUDIO SOURCE: Using a stable direct MP3 link for R&B vibe -->
    <audio id="vault-audio-element" src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" preload="auto" crossorigin="anonymous"></audio>

    <!-- PERSISTENT NAVIGATION -->
    <nav class="fixed w-full z-[100] px-6 py-5 flex justify-between items-center glass bg-black/80 border-b border-gold/10">
        <div class="text-xl font-black gold-text italic tracking-tighter cursor-pointer" onclick="window.scrollTo(0,0)">KEITH SWEAT</div>
        
        <div id="auth-nav" class="flex gap-6 items-center text-[10px] font-bold uppercase tracking-widest">
            <button onclick="openAuth('login')" class="hover:text-gold transition">Login</button>
            <button onclick="openAuth('signup')" class="gold-btn px-6 py-2 rounded-full text-black hover:scale-105 transition">Join SWEAThearts</button>
        </div>

        <div id="user-nav" class="hidden-section flex items-center gap-4">
            <div class="text-right hidden md:block">
                <p id="nav-user-name" class="font-bold text-sm"></p>
                <p class="text-[9px] gold-text uppercase font-black">Platinum Member</p>
            </div>
            <img id="nav-avatar" src="" class="w-10 h-10 rounded-full border border-gold/50 object-cover">
            <button onclick="handleLogout()" class="p-2 hover:text-red-500 transition"><i data-lucide="log-out" class="w-5 h-5"></i></button>
        </div>
    </nav>

    <!-- LANDING PAGE -->
    <div id="landing-page-container">
        <!-- HERO SECTION -->
        <section class="relative h-screen flex flex-col justify-center items-center text-center px-6 overflow-hidden">
            <div class="absolute inset-0 bg-[url('https://images.unsplash.com/photo-1511671782779-c97d3d27a1d4?q=80&w=2070')] bg-cover bg-center opacity-40 scale-110 blur-[2px]"></div>
            <div class="absolute inset-0 bg-gradient-to-t from-dark via-transparent to-dark"></div>
            
            <div class="z-10 animate-fade">
                <h1 class="hero-title text-6xl md:text-[10rem] font-black gold-text mb-4 italic leading-none drop-shadow-2xl">NOBODY</h1>
                <p class="text-lg md:text-xl text-gray-300 max-w-2xl mx-auto mb-12 tracking-[0.4em] uppercase font-light">Official 2026 World Tour Experience</p>
                
                <div class="flex flex-col md:flex-row gap-4 justify-center">
                    <button onclick="openAuth('login')" class="gold-btn px-16 py-5 rounded-full uppercase text-xs tracking-[0.3em] hover:scale-110 transition shadow-[0_0_50px_rgba(191,149,63,0.3)]">Enter The Vault</button>
                    <a href="#legacy" class="px-16 py-5 border border-white/20 rounded-full font-bold uppercase text-xs tracking-widest hover:bg-white/5 transition flex items-center justify-center">The Legacy</a>
                </div>
            </div>
        </section>

        <!-- CLUB BLURB -->
        <section class="py-24 px-6 max-w-4xl mx-auto text-center border-y border-white/5">
            <h2 class="gold-text text-3xl font-black uppercase mb-8 italic tracking-widest">The "SWEAThearts" Club</h2>
            <p class="text-gray-400 leading-loose text-lg font-light italic">
                As a member of the <span class="text-white font-bold">“SWEAThearts”</span>, your membership offers you the chance to gain access to a treasure trove of exclusive content, including behind-the-scenes footage, unreleased tracks, and intimate interviews with the man himself. Immerse yourself in the creative process, gain insight into Sweat's inspirations, and be the first to hear his latest music before it hits the airwaves. This is your all-access pass to the king of R&B.
            </p>
        </section>

        <!-- SWEAT FEST & NEWS -->
        <section class="py-24 px-6 max-w-7xl mx-auto grid lg:grid-cols-2 gap-12 items-center">
            <div class="glass p-12 rounded-[40px] border-gold/20 relative overflow-hidden">
                <div class="absolute top-0 right-0 p-8 opacity-10"><i data-lucide="palmtree" class="w-24 h-24"></i></div>
                <div class="bg-gold/10 text-gold inline-block px-4 py-1 rounded-full text-[10px] font-black uppercase mb-6 tracking-widest">Major Event</div>
                <h2 class="text-5xl font-black gold-text italic mb-6">SWEAT FEST 2026</h2>
                <p class="text-gray-400 mb-8 leading-relaxed">Prepare for the ultimate R&B getaway. Sweat Fest brings together the legends of soul for a multi-day beach experience in paradise. Expect high-end hospitality, sunset performances, and the smooth vibes that only Keith can deliver. Exclusive early bird packages available for members only.</p>
                <div class="flex items-center gap-4 text-xs font-bold">
                    <span class="flex items-center gap-2"><i data-lucide="map-pin" class="w-4 h-4 text-gold"></i> Montego Bay, JA</span>
                    <span class="flex items-center gap-2"><i data-lucide="calendar" class="w-4 h-4 text-gold"></i> June 12-15</span>
                </div>
            </div>
            
            <div class="space-y-6">
                <h3 class="text-xs gold-text font-black uppercase tracking-[0.5em] mb-4">Latest Headlines</h3>
                <div class="glass p-6 rounded-2xl flex gap-6 items-start itinerary-card transition">
                    <div class="bg-gold text-black p-3 rounded-lg font-black text-center min-w-[60px]">20<br><span class="text-[10px]">JAN</span></div>
                    <div>
                        <h4 class="font-bold uppercase tracking-widest text-sm mb-1 italic">World Tour 2026 officially announced</h4>
                        <p class="text-xs text-gray-500">Keith Sweat kicks off the "No One Like Me" tour across 35 cities starting in Miami. Tickets are expected to sell out in record time.</p>
                    </div>
                </div>
                <div class="glass p-6 rounded-2xl flex gap-6 items-start opacity-70 itinerary-card transition">
                    <div class="bg-white/10 text-white p-3 rounded-lg font-black text-center min-w-[60px]">15<br><span class="text-[10px]">JAN</span></div>
                    <div>
                        <h4 class="font-bold uppercase tracking-widest text-sm mb-1 italic">New Single "Working 2" featuring Lil Wayne</h4>
                        <p class="text-xs text-gray-500">The legendary crooner returns with a fresh hit currently climbing the Global R&B charts. Available on all streaming platforms.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- THE LEGACY -->
        <section id="legacy" class="py-32 px-6 bg-gradient-to-b from-black to-zinc-900 border-t border-gold/10">
            <div class="max-w-4xl mx-auto space-y-12">
                <div class="text-center">
                    <h2 class="hero-title text-6xl gold-text italic mb-4">The Legacy</h2>
                    <p class="text-xs tracking-[0.4em] uppercase text-gray-500">6x Platinum Producer, Singer & Songwriter</p>
                </div>
                <div class="space-y-8 text-gray-400 leading-loose text-justify text-lg font-light first-letter:text-7xl first-letter:font-black first-letter:text-gold first-letter:mr-3 first-letter:float-left">
                    Keith Sweat. Who does it better than him... <span class="text-white font-black italic">NOBODY!!!!!</span> Born in Harlem, New York, Keith Sweat began his musical journey in the late 70s, but it was his 1987 debut solo album, <span class="text-white italic">Make It Last Forever</span>, that revolutionized the R&B world, selling over four million copies and delivering the iconic title track.
                </div>
                <div class="space-y-8 text-gray-400 leading-loose text-justify text-lg font-light">
                    As a pioneer of the "New Jack Swing" movement, his smooth baritone and signature "begging" style became the blueprint for modern R&B. From his stint with the supergroup LSG (alongside Gerald Levert and Johnny Gill) to his continued dominance as a producer and radio host of "The Sweat Hotel," Keith remains the undisputed king of slow jams. His career spans decades, but his influence on soul music is eternal.
                </div>
            </div>
        </section>

        <!-- TOUR LISTING -->
        <section class="py-24 px-6 max-w-7xl mx-auto">
            <div class="text-center mb-16">
                <h3 class="text-4xl font-black uppercase gold-text italic mb-2">Upcoming Events 2026</h3>
                <p class="text-xs text-gray-500 uppercase tracking-widest">Global Tour Dates & Exclusive Festivals</p>
            </div>
            <div id="landing-events" class="grid lg:grid-cols-2 gap-4"></div>
        </section>

        <!-- CONTACT -->
        <section class="py-24 px-6 max-w-3xl mx-auto border-t border-white/5">
            <div class="text-center mb-12">
                <h2 class="text-3xl font-black uppercase gold-text italic mb-2">Get In Touch</h2>
                <p class="text-[10px] text-gray-500 uppercase tracking-widest">Management, Booking & Fan Inquiries</p>
            </div>
            <div class="glass p-10 rounded-[30px] space-y-4">
                <input type="email" id="contact-email" placeholder="Your Email Address" class="w-full p-5 rounded-2xl">
                <textarea id="contact-msg" rows="4" placeholder="Message details..." class="w-full p-5 rounded-2xl resize-none"></textarea>
                <button onclick="toast('✓ MESSAGE DISPATCHED TO KEITH SWEAT MGMT')" class="gold-btn w-full py-5 rounded-2xl uppercase tracking-[0.2em] font-black">Submit Message</button>
            </div>
        </section>

        <!-- FOOTER -->
        <footer class="py-24 px-6 bg-black text-center border-t border-white/5">
            <h3 class="hero-title text-4xl mb-4 italic">Who can ♥ you like me?</h3>
            <p class="gold-text text-5xl font-black italic mb-12">Nobooody!</p>
            
            <div class="max-w-md mx-auto flex flex-col items-center mb-12">
                <p class="text-gray-500 text-[10px] uppercase tracking-[0.4em] mb-4">Stay in the loop</p>
                <div class="flex w-full gap-2">
                    <input type="email" id="newsletter-email" placeholder="Enter Email" class="flex-1 p-4 rounded-xl">
                    <button onclick="handleSubscribe()" class="gold-btn px-8 rounded-xl font-black uppercase text-[10px]">Subscribe</button>
                </div>
            </div>
            
            <div class="flex justify-center gap-8 mb-12 text-gray-500">
                <i data-lucide="instagram" class="w-5 h-5 cursor-pointer hover:text-gold transition"></i>
                <i data-lucide="twitter" class="w-5 h-5 cursor-pointer hover:text-gold transition"></i>
                <i data-lucide="facebook" class="w-5 h-5 cursor-pointer hover:text-gold transition"></i>
                <i data-lucide="music" class="w-5 h-5 cursor-pointer hover:text-gold transition"></i>
            </div>
            
            <div class="text-[10px] text-gray-600 font-bold tracking-[0.4em] uppercase">© 2026 KEITH SWEAT ENTERTAINMENT. ALL RIGHTS RESERVED.</div>
        </footer>
    </div>

    <!-- MEMBER DASHBOARD -->
    <div id="dashboard" class="hidden-section pt-32 px-6 max-w-7xl mx-auto pb-20">
        <div class="grid lg:grid-cols-12 gap-10">
            <!-- MAIN CONTENT -->
            <div class="lg:col-span-8 space-y-10">
                <div class="flex flex-col gap-2">
                    <h2 class="text-3xl font-black uppercase tracking-tight">The Vault / <span id="welcome-name" class="gold-text"></span></h2>
                    <p class="text-gray-400 italic font-light text-lg">
                        "Welcome back, <span id="personal-name" class="text-white font-bold"></span>... I appreciate the love. See you on tour."
                    </p>
                </div>
                
                <div class="vault-container p-10 shadow-[0_0_100px_rgba(191,149,63,0.15)] flex flex-col md:flex-row items-center gap-8 border-gold/40">
                    <div class="relative group">
                        <img src="https://images.unsplash.com/photo-1598488035139-bdbb2231ce04?q=80&w=500" class="w-48 h-48 rounded-2xl object-cover shadow-2xl border border-gold/20">
                        <div class="absolute inset-0 bg-black/40 flex items-center justify-center rounded-2xl opacity-0 group-hover:opacity-100 transition">
                            <i data-lucide="music" class="text-gold w-12 h-12"></i>
                        </div>
                    </div>
                    <div class="flex-1 space-y-4 text-center md:text-left">
                        <div>
                            <span class="bg-gold/10 text-gold text-[10px] px-3 py-1 rounded-full font-black uppercase tracking-widest">Unreleased Studio Demo</span>
                            <h3 class="text-4xl font-black italic gold-text mt-2 uppercase tracking-tighter">Working 2 (Vault Mix)</h3>
                            <p class="text-xs text-gray-500 font-bold uppercase tracking-widest">Keith Sweat feat. Lil Wayne</p>
                        </div>
                        
                        <div class="bg-white/5 rounded-2xl p-4 border border-white/5 space-y-3">
                            <div class="flex items-center gap-4">
                                <button id="play-btn" onclick="toggleAudio()" class="w-12 h-12 rounded-full gold-btn flex items-center justify-center">
                                    <i data-lucide="play" id="play-icon" class="w-6 h-6 ml-1 text-black"></i>
                                </button>
                                <div class="flex-1">
                                    <div class="h-1 bg-white/10 w-full rounded-full overflow-hidden">
                                        <div id="audio-progress" class="h-full bg-gold w-0 transition-all duration-300"></div>
                                    </div>
                                    <div class="flex justify-between mt-2 text-[9px] font-bold text-gray-500 uppercase tracking-widest">
                                        <span id="audio-time">0:00</span>
                                        <span id="audio-duration">--:--</span>
                                    </div>
                                </div>
                                <i data-lucide="volume-2" class="w-4 h-4 text-gold"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="space-y-6">
                    <div class="flex justify-between items-end border-b border-white/5 pb-4">
                        <h3 class="text-xs font-black gold-text uppercase tracking-[0.4em]">My Active Itinerary</h3>
                        <p class="text-[9px] text-gray-500 font-bold uppercase">Member Pricing Enabled</p>
                    </div>
                    <div id="ticket-container" class="grid md:grid-cols-2 gap-4"></div>
                </div>
            </div>

            <div class="lg:col-span-4 space-y-6">
                <div class="glass p-8 rounded-[35px] border-gold/30 relative overflow-hidden group">
                    <div class="flex justify-between items-start mb-12">
                        <div class="bg-gold text-black text-[8px] font-black px-3 py-1 rounded-full uppercase shadow-xl">Platinum Tier</div>
                        <i data-lucide="crown" class="text-gold w-6 h-6 animate-pulse"></i>
                    </div>
                    <div class="flex gap-5 items-center">
                        <div class="relative cursor-pointer hover:scale-105 transition" onclick="document.getElementById('avatar-upload').click()">
                            <img id="card-avatar" src="" class="w-20 h-20 rounded-2xl object-cover border border-gold/20 shadow-2xl">
                            <div class="absolute -bottom-1 -right-1 bg-gold text-black p-1 rounded-full border-2 border-dark">
                                <i data-lucide="camera" class="w-3 h-3"></i>
                            </div>
                            <input type="file" id="avatar-upload" class="hidden" accept="image/*" onchange="previewImage(this)">
                        </div>
                        <div>
                            <p id="card-name" class="font-black text-lg uppercase gold-text leading-tight"></p>
                            <p id="card-origin" class="text-[9px] text-gray-400 font-bold uppercase tracking-widest"></p>
                        </div>
                    </div>
                </div>

                <button onclick="showDetails('Exclusive Meet & Greet', 750, 'Ticket', 'Backstage Access', 'Includes a 15-minute private meeting with Keith, professional group photo, exclusive tour laminate, and a personalized signed gift bag.')" class="gold-btn w-full py-8 rounded-[30px] text-sm uppercase tracking-[0.2em] shadow-2xl hover:scale-[1.03] transition">
                    Request Meet & Greet
                </button>

                <div class="glass p-8 rounded-[35px] space-y-6">
                    <h4 class="text-[10px] font-black uppercase text-gray-500 tracking-widest">Membership Upgrades</h4>
                    <div id="tier-container" class="space-y-4"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- UNIVERSAL MODAL -->
    <div id="universal-modal" class="hidden-section fixed inset-0 z-[500] flex items-center justify-center bg-black/98 p-4 overflow-y-auto">
        <div class="glass max-w-md w-full p-10 rounded-[45px] relative border-gold/20 my-auto">
            <button onclick="closeModals()" class="absolute top-8 right-8 text-gray-500 hover:text-white transition"><i data-lucide="x"></i></button>
            
            <div id="stage-details" class="space-y-8 text-center">
                <h4 id="det-title" class="text-2xl font-black gold-text uppercase italic"></h4>
                <div class="space-y-2">
                    <p id="det-venue" class="text-[10px] text-gray-400 font-bold uppercase tracking-[0.3em]"></p>
                    <p id="det-desc" class="text-[11px] text-gray-500 italic px-4 leading-relaxed"></p>
                </div>
                <div class="flex items-center justify-center gap-10 py-4">
                    <button onclick="updateQty(-1)" class="w-12 h-12 rounded-full border border-white/10 hover:border-gold transition text-2xl font-light">-</button>
                    <span id="qty-display" class="text-5xl font-black">1</span>
                    <button onclick="updateQty(1)" class="w-12 h-12 rounded-full border border-white/10 hover:border-gold transition text-2xl font-light">+</button>
                </div>
                <div class="border-t border-white/5 pt-6">
                    <p id="total-price-display" class="text-5xl font-black gold-text">$0</p>
                </div>
                <button onclick="handleProceedFromQty()" class="gold-btn w-full py-6 rounded-2xl uppercase tracking-widest text-xs">Proceed</button>
            </div>

            <div id="stage-collect-info-ticket" class="hidden-section space-y-4">
                <div class="text-center mb-6">
                    <p class="text-xs gold-text font-black uppercase tracking-widest">Attendee Information</p>
                    <p class="text-[9px] text-gray-600 uppercase">Required for security clearance</p>
                </div>
                <input type="text" id="info-name" placeholder="Full Name" class="w-full p-4 rounded-xl">
                <input type="email" id="info-email" placeholder="Email Address" class="w-full p-4 rounded-xl">
                <div class="grid grid-cols-2 gap-4">
                    <input type="number" id="info-age" placeholder="Age" class="p-4 rounded-xl">
                    <select id="info-sex" class="p-4 rounded-xl">
                        <option value="">Sex</option><option>Male</option><option>Female</option><option>Other</option>
                    </select>
                </div>
                <button onclick="showStage('wallets')" class="gold-btn w-full py-5 rounded-xl uppercase text-[10px] mt-4">Confirm & Pay</button>
            </div>

            <div id="stage-collect-info-tier" class="hidden-section space-y-4">
                <div class="text-center mb-6">
                    <p class="text-xs gold-text font-black uppercase tracking-widest">Upgrade Registry</p>
                    <p class="text-[9px] text-gray-600 uppercase">Verification for Tier Status</p>
                </div>
                <input type="text" id="tier-info-name" placeholder="Full Name" class="w-full p-4 rounded-xl">
                <input type="email" id="tier-info-email" placeholder="Email Address" class="w-full p-4 rounded-xl">
                <select id="tier-info-country-sel" class="w-full p-4 rounded-xl">
                    <option value="">Select Country</option>
                </select>
                <input type="text" id="tier-info-state" placeholder="State/Province" class="w-full p-4 rounded-xl">
                <input type="tel" id="tier-info-phone" placeholder="Phone Number" class="w-full p-4 rounded-xl">
                <button onclick="showStage('wallets')" class="gold-btn w-full py-5 rounded-xl uppercase text-[10px] mt-4">Confirm & Pay</button>
            </div>

            <div id="stage-wallets" class="hidden-section space-y-4">
                <div class="text-center mb-6">
                    <p class="text-xs gold-text font-black uppercase tracking-widest">Secure Payment Gateway</p>
                    <p class="text-[9px] text-gray-600 uppercase">Select preferred cryptocurrency</p>
                </div>
                <button onclick="showFinalWallet('BTC', 'bc1qm4l45yuppla9d7a7vv7dz0cxvl55sqacx5mhgj')" class="w-full p-6 glass rounded-2xl flex justify-between items-center hover:border-gold transition">
                    <span class="font-bold">BITCOIN</span>
                    <i data-lucide="badge-dollar-sign" class="text-gold"></i>
                </button>
                <button onclick="showFinalWallet('USDT', '0x5778e621aED2753102f6d316aB734Fd0fD413cdA')" class="w-full p-6 glass rounded-2xl flex justify-between items-center hover:border-gold transition">
                    <span class="font-bold">USDT (ERC20)</span>
                    <i data-lucide="shield-check" class="text-gold"></i>
                </button>
            </div>

            <div id="stage-address" class="hidden-section text-center space-y-8">
                <div class="bg-white p-3 rounded-2xl w-48 h-48 mx-auto">
                    <img id="qr-img" src="" class="w-full">
                </div>
                <div class="space-y-4">
                    <div class="flex items-center gap-3 bg-white/5 p-5 rounded-2xl border border-gold/30">
                        <p id="wallet-addr" class="text-sm font-mono break-all font-black text-white"></p>
                        <button onclick="copyAddr()" class="p-2 bg-gold/20 rounded-lg text-gold"><i data-lucide="copy" class="w-4 h-4"></i></button>
                    </div>
                </div>
                <button onclick="processFinal()" class="gold-btn w-full py-6 rounded-xl font-black uppercase text-xs">Confirm Payment Sent</button>
            </div>

            <div id="stage-loading" class="hidden-section py-20 text-center">
                <div class="w-16 h-16 border-4 border-gold border-t-transparent rounded-full animate-spin mx-auto mb-6"></div>
                <p class="font-black tracking-widest gold-text text-sm uppercase">Synchronizing Blockchain...</p>
            </div>

            <div id="stage-thankyou" class="hidden-section py-10 text-center space-y-6">
                <div class="w-20 h-20 bg-green-500/20 rounded-full flex items-center justify-center mx-auto"><i data-lucide="check" class="text-green-500 w-10 h-10"></i></div>
                <h2 class="text-3xl font-black gold-text uppercase italic">PAYMENT RECEIVED</h2>
                <button onclick="closeModals()" class="gold-btn px-10 py-4 rounded-xl text-xs uppercase">Return to Vault</button>
            </div>
        </div>
    </div>

    <!-- AUTH MODAL -->
    <div id="auth-modal" class="hidden-section fixed inset-0 z-[200] flex items-center justify-center bg-black/95 p-4 overflow-y-auto">
        <div class="glass max-lg w-full p-10 rounded-[40px] relative border-gold/20 my-auto">
            <button onclick="closeModals()" class="absolute top-8 right-8 text-gray-500"><i data-lucide="x"></i></button>
            
            <div id="signup-box" class="space-y-4">
                <h2 class="text-3xl font-black gold-text mb-2 text-center uppercase italic">Join SWEAThearts</h2>
                <div class="grid md:grid-cols-2 gap-4">
                    <input type="text" id="reg-name" placeholder="Full Name" class="p-4 rounded-xl">
                    <input type="email" id="reg-email" placeholder="Email Address" class="p-4 rounded-xl">
                </div>
                <div class="grid md:grid-cols-2 gap-4">
                    <input type="password" id="reg-pass" placeholder="Password" class="p-4 rounded-xl">
                    <select id="reg-country" onchange="updateCountryCode()" class="p-4 rounded-xl">
                        <option value="">Country</option>
                    </select>
                </div>
                <div class="flex gap-2">
                    <input type="text" id="reg-code" readonly class="w-20 p-4 rounded-xl text-center bg-gold/10 text-gold font-bold" value="+1">
                    <input type="tel" id="reg-phone" placeholder="Mobile Number" class="flex-1 p-4 rounded-xl">
                </div>
                <button id="signup-submit-btn" onclick="handleSignupFlow()" class="gold-btn w-full py-5 rounded-2xl uppercase text-xs mt-4">Create Membership</button>
            </div>

            <div id="verify-box" class="hidden-section space-y-6 text-center">
                <h2 class="text-3xl font-black gold-text mb-4 uppercase italic">Security Verification</h2>
                <input type="text" maxlength="6" id="verify-code-input" placeholder="000000" class="w-full bg-transparent border-b-2 border-gold text-center text-5xl font-black py-4 outline-none tracking-[0.5em]">
                <button onclick="completeVerification()" class="gold-btn w-full py-5 rounded-2xl uppercase text-xs mt-8">Activate Account</button>
            </div>

            <div id="login-box" class="hidden-section space-y-4">
                <h2 class="text-3xl font-black gold-text mb-8 text-center uppercase italic">Member Access</h2>
                <input type="email" id="log-email" placeholder="Email" class="w-full p-4 rounded-xl">
                <input type="password" id="log-pass" placeholder="Password" class="w-full p-4 rounded-xl">
                <button onclick="handleLogin()" class="gold-btn w-full py-5 rounded-2xl uppercase text-xs mt-4">Login to Vault</button>
            </div>
        </div>
    </div>

    <script>
        emailjs.init("KNFIOQmX4KE0zkQWi");
        const firebaseConfig = { apiKey: "AIzaSyBb0YUZbhvhYfF9WraXy-CS5HtM9nkqG60", authDomain: "sol-ruca.firebaseapp.com", projectId: "sol-ruca", storageBucket: "sol-ruca.firebasestorage.app", messagingSenderId: "51567930077", appId: "1:51567930077:web:8f345e5857b67efa1a0934" };
        firebase.initializeApp(firebaseConfig);
        const db_fs = firebase.firestore();

        lucide.createIcons();
        let cur = {};
        let currentUser = null;
        let tempUser = null;

        const allCountries = [
            { name: "United States", code: "+1" }, { name: "United Kingdom", code: "+44" },
            { name: "Nigeria", code: "+234" }, { name: "Jamaica", code: "+1" },
            { name: "Canada", code: "+1" }, { name: "South Africa", code: "+27" },
            { name: "Ghana", code: "+233" }, { name: "Kenya", code: "+254" },
            { name: "France", code: "+33" }, { name: "Germany", code: "+49" },
            { name: "Japan", code: "+81" }, { name: "Brazil", code: "+55" },
            { name: "Australia", code: "+61" }, { name: "Italy", code: "+39" },
            { name: "Spain", code: "+34" }, { name: "Bahamas", code: "+1" },
            { name: "Trinidad & Tobago", code: "+1" }, { name: "Mexico", code: "+52" },
            { name: "United Arab Emirates", code: "+971" }, { name: "India", code: "+91" },
            { name: "Afghanistan", code: "+93" }, { name: "Albania", code: "+355" },
            { name: "Algeria", code: "+213" }, { name: "Andorra", code: "+376" },
            { name: "Angola", code: "+244" }, { name: "Antigua and Barbuda", code: "+1" },
            { name: "Argentina", code: "+54" }, { name: "Armenia", code: "+374" },
            { name: "Austria", code: "+43" }, { name: "Azerbaijan", code: "+994" },
            { name: "Bahrain", code: "+973" }, { name: "Bangladesh", code: "+880" },
            { name: "Barbados", code: "+1" }, { name: "Belarus", code: "+375" },
            { name: "Belgium", code: "+32" }, { name: "Belize", code: "+501" },
            { name: "Benin", code: "+229" }, { name: "Bhutan", code: "+975" },
            { name: "Bolivia", code: "+591" }, { name: "Bosnia and Herzegovina", code: "+387" },
            { name: "Botswana", code: "+267" }, { name: "Brunei", code: "+673" },
            { name: "Bulgaria", code: "+359" }, { name: "Burkina Faso", code: "+226" },
            { name: "Burundi", code: "+257" }, { name: "Cambodia", code: "+855" },
            { name: "Cameroon", code: "+237" }, { name: "Cape Verde", code: "+238" },
            { name: "Central African Republic", code: "+236" }, { name: "Chad", code: "+235" },
            { name: "Chile", code: "+56" }, { name: "China", code: "+86" },
            { name: "Colombia", code: "+57" }, { name: "Comoros", code: "+269" },
            { name: "Congo", code: "+242" }, { name: "Costa Rica", code: "+506" },
            { name: "Croatia", code: "+385" }, { name: "Cuba", code: "+53" },
            { name: "Cyprus", code: "+357" }, { name: "Czech Republic", code: "+420" },
            { name: "Denmark", code: "+45" }, { name: "Djibouti", code: "+253" },
            { name: "Dominica", code: "+1" }, { name: "Dominican Republic", code: "+1" },
            { name: "Ecuador", code: "+593" }, { name: "Egypt", code: "+20" },
            { name: "El Salvador", code: "+503" }, { name: "Equatorial Guinea", code: "+240" },
            { name: "Eritrea", code: "+291" }, { name: "Estonia", code: "+372" },
            { name: "Eswatini", code: "+268" }, { name: "Ethiopia", code: "+251" },
            { name: "Fiji", code: "+679" }, { name: "Finland", code: "+358" },
            { name: "Gabon", code: "+241" }, { name: "Gambia", code: "+220" },
            { name: "Georgia", code: "+995" }, { name: "Greece", code: "+30" },
            { name: "Grenada", code: "+1" }, { name: "Guatemala", code: "+502" },
            { name: "Guinea", code: "+224" }, { name: "Guyana", code: "+592" },
            { name: "Haiti", code: "+509" }, { name: "Honduras", code: "+504" },
            { name: "Hungary", code: "+36" }, { name: "Iceland", code: "+354" },
            { name: "Indonesia", code: "+62" }, { name: "Iran", code: "+98" },
            { name: "Iraq", code: "+964" }, { name: "Ireland", code: "+353" },
            { name: "Israel", code: "+972" }, { name: "Jordan", code: "+962" },
            { name: "Kazakhstan", code: "+7" }, { name: "Kuwait", code: "+965" },
            { name: "Kyrgyzstan", code: "+996" }, { name: "Laos", code: "+856" },
            { name: "Latvia", code: "+371" }, { name: "Lebanon", code: "+961" },
            { name: "Lesotho", code: "+266" }, { name: "Liberia", code: "+231" },
            { name: "Libya", code: "+218" }, { name: "Liechtenstein", code: "+423" },
            { name: "Lithuania", code: "+370" }, { name: "Luxembourg", code: "+352" },
            { name: "Madagascar", code: "+261" }, { name: "Malawi", code: "+265" },
            { name: "Malaysia", code: "+60" }, { name: "Maldives", code: "+960" },
            { name: "Mali", code: "+223" }, { name: "Malta", code: "+356" },
            { name: "Mauritania", code: "+222" }, { name: "Mauritius", code: "+230" },
            { name: "Monaco", code: "+377" }, { name: "Mongolia", code: "+976" },
            { name: "Montenegro", code: "+382" }, { name: "Morocco", code: "+212" },
            { name: "Mozambique", code: "+258" }, { name: "Myanmar", code: "+95" },
            { name: "Namibia", code: "+264" }, { name: "Nepal", code: "+977" },
            { name: "Netherlands", code: "+31" }, { name: "New Zealand", code: "+64" },
            { name: "Nicaragua", code: "+505" }, { name: "Niger", code: "+227" },
            { name: "Norway", code: "+47" }, { name: "Oman", code: "+968" },
            { name: "Pakistan", code: "+92" }, { name: "Palestine", code: "+970" },
            { name: "Panama", code: "+507" }, { name: "Papua New Guinea", code: "+675" },
            { name: "Paraguay", code: "+595" }, { name: "Peru", code: "+51" },
            { name: "Philippines", code: "+63" }, { name: "Poland", code: "+48" },
            { name: "Portugal", code: "+351" }, { name: "Qatar", code: "+974" },
            { name: "Romania", code: "+40" }, { name: "Russia", code: "+7" },
            { name: "Rwanda", code: "+250" }, { name: "Saint Kitts and Nevis", code: "+1" },
            { name: "Saint Lucia", code: "+1" }, { name: "Saint Vincent", code: "+1" },
            { name: "Samoa", code: "+685" }, { name: "Saudi Arabia", code: "+966" },
            { name: "Senegal", code: "+221" }, { name: "Serbia", code: "+381" },
            { name: "Seychelles", code: "+248" }, { name: "Sierra Leone", code: "+232" },
            { name: "Singapore", code: "+65" }, { name: "Slovakia", code: "+421" },
            { name: "Slovenia", code: "+386" }, { name: "Solomon Islands", code: "+677" },
            { name: "Somalia", code: "+252" }, { name: "South Korea", code: "+82" },
            { name: "South Sudan", code: "+211" }, { name: "Spain", code: "+34" },
            { name: "Sri Lanka", code: "+94" }, { name: "Sudan", code: "+249" },
            { name: "Suriname", code: "+597" }, { name: "Sweden", code: "+46" },
            { name: "Switzerland", code: "+41" }, { name: "Syria", code: "+963" },
            { name: "Taiwan", code: "+886" }, { name: "Tajikistan", code: "+992" },
            { name: "Tanzania", code: "+255" }, { name: "Thailand", code: "+66" },
            { name: "Togo", code: "+228" }, { name: "Tonga", code: "+676" },
            { name: "Tunisia", code: "+216" }, { name: "Turkey", code: "+90" },
            { name: "Turkmenistan", code: "+993" }, { name: "Uganda", code: "+256" },
            { name: "Ukraine", code: "+380" }, { name: "Uruguay", code: "+598" },
            { name: "Uzbekistan", code: "+998" }, { name: "Vanuatu", code: "+678" },
            { name: "Vatican City", code: "+39" }, { name: "Venezuela", code: "+58" },
            { name: "Vietnam", code: "+84" }, { name: "Yemen", code: "+967" },
            { name: "Zambia", code: "+260" }, { name: "Zimbabwe", code: "+263" }
        ].sort((a,b) => a.name.localeCompare(b.name));

        const tourEvents = [
            { date: "JAN 24", v: "MAGIC CITY CASINO", city: "MIAMI, FL", price: 150, info: "Official Tour Kick-off. Visuals and career-spanning setlist." },
            { date: "JAN 31", v: "MYSTIC LAKE CASINO", city: "PRIOR LAKE, MN", price: 90, info: "Intimate night of R&B in luxury theater." },
            { date: "FEB 06", v: "POWERS AUDITORIUM", city: "YOUNGSTOWN, OH", price: 85, info: "Classic soul performance in historic venue." },
            { date: "FEB 21", v: "BJCC ARENA", city: "BIRMINGHAM, AL", price: 130, info: "Southern Soul Jam. Special guests." }
        ];

        function toast(txt) { 
            Toastify({ text: txt, duration: 4000, position: "center", style: { background: "#000", color: "#bf953f", border: "1px solid #bf953f", borderRadius: "12px", fontSize: "10px", fontWeight: "900" } }).showToast(); 
        }

        function populateCountries() {
            const signupSelect = document.getElementById('reg-country');
            const tierSelect = document.getElementById('tier-info-country-sel');
            
            const optionsHtml = allCountries.map(c => 
                `<option value="${c.name}" data-code="${c.code}">${c.name}</option>`
            ).join('');

            signupSelect.innerHTML = `<option value="">Country</option>` + optionsHtml;
            tierSelect.innerHTML = `<option value="">Select Country</option>` + optionsHtml;
        }

        function toggleAudio() {
            const audio = document.getElementById('vault-audio-element');
            const icon = document.getElementById('play-icon');
            const progress = document.getElementById('audio-progress');
            const timeDisplay = document.getElementById('audio-time');
            const durationDisplay = document.getElementById('audio-duration');

            // Force load if not ready
            if (audio.readyState === 0) {
                audio.load();
            }

            if (audio.paused) {
                const playPromise = audio.play();
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        icon.setAttribute('data-lucide', 'pause');
                        lucide.createIcons();
                    }).catch(error => {
                        console.error("Playback failed:", error);
                        toast("✕ AUDIO LOAD ERROR - RETRYING");
                        audio.load();
                    });
                }
            } else {
                audio.pause();
                icon.setAttribute('data-lucide', 'play');
                lucide.createIcons();
            }

            audio.ontimeupdate = () => {
                if (audio.duration) {
                    const pct = (audio.currentTime / audio.duration) * 100;
                    progress.style.width = pct + '%';
                    
                    const curMins = Math.floor(audio.currentTime / 60);
                    const curSecs = Math.floor(audio.currentTime % 60);
                    timeDisplay.innerText = `${curMins}:${curSecs.toString().padStart(2, '0')}`;
                    
                    const durMins = Math.floor(audio.duration / 60);
                    const durSecs = Math.floor(audio.duration % 60);
                    durationDisplay.innerText = `${durMins}:${durSecs.toString().padStart(2, '0')}`;
                }
            };

            audio.onended = () => {
                icon.setAttribute('data-lucide', 'play');
                progress.style.width = '0%';
                timeDisplay.innerText = '0:00';
                lucide.createIcons();
            };
        }

        function openAuth(m) {
            document.getElementById('auth-modal').classList.remove('hidden-section');
            document.getElementById('signup-box').classList.toggle('hidden-section', m !== 'signup');
            document.getElementById('login-box').classList.toggle('hidden-section', m !== 'login');
            document.getElementById('verify-box').classList.add('hidden-section');
        }

        function closeModals() { 
            document.getElementById('auth-modal').classList.add('hidden-section'); 
            document.getElementById('universal-modal').classList.add('hidden-section'); 
        }

        async function handleSignupFlow() {
            const btn = document.getElementById('signup-submit-btn');
            const user = {
                name: document.getElementById('reg-name').value,
                email: document.getElementById('reg-email').value,
                pass: document.getElementById('reg-pass').value,
                country: document.getElementById('reg-country').value,
                phone: document.getElementById('reg-phone').value
            };
            if(!user.name || !user.email || !user.pass) return toast("✕ PLEASE COMPLETE ALL FIELDS");
            
            btn.disabled = true;
            btn.innerHTML = `<div class="w-4 h-4 border-2 border-black border-t-transparent rounded-full animate-spin"></div><span>Creating...</span>`;
            
            const otp = Math.floor(100000 + Math.random() * 900000).toString();
            tempUser = user;
            try {
                await db_fs.collection("verificationCodes").doc(user.email).set({ code: otp });
                await emailjs.send('service_ygmydfe', 'template_zn0fykw', { email: user.email, passcode: otp });
                document.getElementById('signup-box').classList.add('hidden-section');
                document.getElementById('verify-box').classList.remove('hidden-section');
                toast("✓ SECURITY CODE SENT");
            } catch (e) { 
                toast("✕ UNAVAILABLE");
                btn.disabled = false;
                btn.innerHTML = `<span>Create Membership</span>`;
            }
        }

        async function completeVerification() {
            const userCode = document.getElementById('verify-code-input').value;
            const doc = await db_fs.collection("verificationCodes").doc(tempUser.email).get();
            if (doc.exists && doc.data().code === userCode) {
                let db = JSON.parse(localStorage.getItem('ks_hearts')) || [];
                db.push(tempUser);
                localStorage.setItem('ks_hearts', JSON.stringify(db));
                toast("✓ VERIFIED! WELCOME.");
                document.getElementById('verify-box').classList.add('hidden-section');
                document.getElementById('login-box').classList.remove('hidden-section');
            } else { toast("✕ INCORRECT CODE"); }
        }

        function handleLogin() {
            const email = document.getElementById('log-email').value;
            const pass = document.getElementById('log-pass').value;
            const db = JSON.parse(localStorage.getItem('ks_hearts')) || [];
            const u = db.find(x => x.email === email && x.pass === pass);
            if(u) {
                currentUser = u;
                toast("✓ LOGIN SUCCESSFUL");
                document.getElementById('landing-page-container').classList.add('hidden-section');
                document.getElementById('dashboard').classList.remove('hidden-section');
                document.getElementById('auth-nav').classList.add('hidden-section');
                document.getElementById('user-nav').classList.remove('hidden-section');
                document.getElementById('nav-user-name').innerText = u.name;
                document.getElementById('welcome-name').innerText = u.name.toUpperCase();
                document.getElementById('personal-name').innerText = u.name;
                document.getElementById('card-name').innerText = u.name;
                document.getElementById('card-origin').innerText = u.country || "GLOBAL";
                document.getElementById('nav-avatar').src = `https://ui-avatars.com/api/?name=${u.name}&background=bf953f&color=000`;
                document.getElementById('card-avatar').src = `https://ui-avatars.com/api/?name=${u.name}&background=bf953f&color=000`;
                populateDashboardTickets();
                closeModals();
            } else { toast("✕ NOT FOUND"); }
        }

        function handleLogout() {
            currentUser = null;
            location.reload();
        }

        function showDetails(title, price, type, venue, info) {
            cur = { title, price, qty: 1, type, venue, info };
            document.getElementById('universal-modal').classList.remove('hidden-section');
            showStage('details');
            document.getElementById('det-title').innerText = title;
            document.getElementById('det-venue').innerText = venue;
            document.getElementById('det-desc').innerText = info;
            updateQty(0);
        }

        function handleProceedFromQty() {
            if (cur.type === 'Ticket') {
                showStage('collect-info-ticket');
                document.getElementById('info-name').value = currentUser?.name || "";
                document.getElementById('info-email').value = currentUser?.email || "";
            } else if (cur.type === 'Tier') {
                showStage('collect-info-tier');
                document.getElementById('tier-info-name').value = currentUser?.name || "";
                document.getElementById('tier-info-email').value = currentUser?.email || "";
            }
        }

        function updateQty(v) {
            cur.qty = Math.max(1, cur.qty + v);
            document.getElementById('qty-display').innerText = cur.qty;
            document.getElementById('total-price-display').innerText = `$${cur.qty * cur.price}`;
        }

        function showStage(s) {
            ['details', 'collect-info-ticket', 'collect-info-tier', 'wallets', 'address', 'loading', 'thankyou'].forEach(id => {
                const el = document.getElementById('stage-'+id);
                if(el) el.classList.add('hidden-section');
            });
            document.getElementById('stage-'+s).classList.remove('hidden-section');
        }

        function showFinalWallet(m, a) {
            showStage('address');
            document.getElementById('wallet-addr').innerText = a;
            document.getElementById('qr-img').src = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${a}`;
        }

        function copyAddr() {
            const addr = document.getElementById('wallet-addr').innerText;
            const el = document.createElement('textarea');
            el.value = addr; document.body.appendChild(el); el.select();
            document.execCommand('copy'); document.body.removeChild(el);
            toast("✓ COPIED");
        }

        function processFinal() { 
            showStage('loading'); 
            setTimeout(() => { showStage('thankyou'); lucide.createIcons(); }, 4000); 
        }

        function populateLandingEvents() {
            const cont = document.getElementById('landing-events');
            cont.innerHTML = tourEvents.map(e => `
                <div class="glass p-6 rounded-3xl flex items-center justify-between border-white/5 itinerary-card transition">
                    <div class="flex gap-4 items-center">
                        <div class="bg-gold/10 text-gold p-3 rounded-xl text-center min-w-[60px]">
                            <p class="text-xs font-black uppercase">${e.date.split(' ')[0]}</p>
                            <p class="text-lg font-black">${e.date.split(' ')[1]}</p>
                        </div>
                        <div>
                            <h4 class="font-black gold-text uppercase text-sm">${e.v}</h4>
                            <p class="text-[10px] text-gray-400 font-bold uppercase tracking-widest">${e.city}</p>
                        </div>
                    </div>
                    <button onclick="openAuth('login')" class="text-[10px] border border-gold px-6 py-2 rounded-full uppercase font-black hover:bg-gold hover:text-black transition">Get Tickets</button>
                </div>
            `).join('');
        }

        function populateDashboardTickets() {
            document.getElementById('ticket-container').innerHTML = tourEvents.map(m => `
                <div class="glass p-6 rounded-3xl flex justify-between items-center border-white/5 hover:border-gold/30 transition cursor-pointer" onclick="showDetails('${m.v}', ${m.price}, 'Ticket', '${m.city}', '${m.info}')">
                    <div>
                        <p class="text-[9px] gold-text font-black uppercase mb-1">${m.date}</p>
                        <h4 class="font-bold text-xs uppercase tracking-widest">${m.v}</h4>
                    </div>
                    <span class="text-[10px] font-black tracking-widest">$${m.price}</span>
                </div>`).join('');

            document.getElementById('tier-container').innerHTML = [
                {n: "Gold Circle", p: 250, d: "Premium Floor Access + Laminate"}, 
                {n: "Diamond VIP", p: 950, d: "Full Hospitality + Private Suite"}
            ].map(t => `
                <div class="p-4 rounded-2xl bg-white/5 flex gap-4 items-center border border-white/5">
                    <div class="flex-1">
                        <b class="text-[10px] gold-text uppercase tracking-widest">${t.n}</b>
                        <p class="text-[9px] text-gray-500 line-clamp-1">${t.d}</p>
                    </div>
                    <button onclick="showDetails('${t.n}', ${t.p}, 'Tier', '${t.d}', 'Exclusive status upgrade.')" class="text-[9px] border border-gold text-gold px-3 py-1.5 rounded-full uppercase hover:bg-gold hover:text-black transition">Upgrade</button>
                </div>`).join('');
            lucide.createIcons();
        }

        function previewImage(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    document.getElementById('card-avatar').src = e.target.result;
                    document.getElementById('nav-avatar').src = e.target.result;
                    toast("✓ UPDATED");
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        function updateCountryCode() {
            const sel = document.getElementById('reg-country');
            const code = sel.options[sel.selectedIndex].getAttribute('data-code');
            document.getElementById('reg-code').value = code || "+1";
        }

        window.onload = () => { 
            populateLandingEvents(); 
            populateCountries();
        };
    </script>
</body>
</html>

